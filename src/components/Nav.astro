---
// src/components/Nav.astro
import BaseLink from './BaseLink.astro';

// Normalize current path so it works with BASE_URL
const rawPath = Astro.url.pathname;
// e.g. "/HanBin-Personal-Blog/blog/" -> "/blog/"
const currentPath = rawPath.replace(import.meta.env.BASE_URL, '/') || '/';

const links = [
  { href: '', label: 'Home', match: '/' },
  { href: 'blog/', label: 'Blog', match: '/blog/' },
  { href: 'about/', label: 'About', match: '/about/' },
];

function isActive(match: string) {
  return currentPath === match || currentPath.startsWith(match);
}
---

<nav class="flex items-center justify-between py-4">
  <div class="font-semibold text-lg">
    <BaseLink href="">HanBin</BaseLink>
  </div>

  <ul class="flex gap-4 text-sm">
    {links.map((link) => (
      <li>
        <BaseLink
          href={link.href}
          class={
            'hover:underline ' +
            (isActive(link.match) ? 'font-semibold' : 'text-zinc-500')
          }
        >
          {link.label}
        </BaseLink>
      </li>
    ))}
  </ul>
</nav>
